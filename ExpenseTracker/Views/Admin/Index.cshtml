@{
    ViewData["Title"] = "Admin Portal";
    var isSuperAdmin = ViewBag.IsSuperAdmin ?? false;
}

<div class="container-fluid mt-5">
    <div class="row">
        <div class="col-12">
            <div class="d-flex justify-content-between align-items-center mb-4">
                <div>
                    <h1><i class="bi bi-shield-lock-fill"></i> Admin Portal</h1>
                    @if (isSuperAdmin)
                    {
                        <p class="text-danger fw-bold mb-0">
                            <i class="bi bi-star-fill"></i> Welcome, @User.Identity?.Name! (Superadmin - Highest Level Access)
                        </p>
                        <p class="text-muted small">You have full control over the entire system including user management and admin creation.</p>
                    }
                    else
                    {
                        <p class="text-warning fw-bold mb-0">
                            <i class="bi bi-shield-check"></i> Welcome, @User.Identity?.Name! (Admin - Executive Access)
                        </p>
                        <p class="text-muted small">You can manage users, menus, and roles. Contact superadmin for elevated privileges.</p>
                    }
                </div>
                <a asp-controller="Dashboard" asp-action="Index" class="btn btn-secondary">
                    <i class="bi bi-speedometer2"></i> Go to Dashboard
                </a>
            </div>
        </div>
    </div>

    <!-- Statistics Cards -->
    <div class="row mt-4">
        <div class="col-md-3">
            <div class="card border-primary shadow-sm">
                <div class="card-body text-center">
                    <i class="bi bi-people-fill text-primary" style="font-size: 3rem;"></i>
                    <h3 class="mt-3">@ViewBag.TotalUsers</h3>
                    <p class="text-muted mb-0">Total Users</p>
                </div>
            </div>
        </div>
        <div class="col-md-3">
            <div class="card border-warning shadow-sm">
                <div class="card-body text-center">
                    <i class="bi bi-shield-fill-check text-warning" style="font-size: 3rem;"></i>
                    <h3 class="mt-3">@ViewBag.TotalAdmins</h3>
                    <p class="text-muted mb-0">Admin Users</p>
                </div>
            </div>
        </div>
        <div class="col-md-3">
            <div class="card border-info shadow-sm">
                <div class="card-body text-center">
                    <i class="bi bi-menu-button-wide text-info" style="font-size: 3rem;"></i>
                    <h3 class="mt-3">@ViewBag.TotalMenus</h3>
                    <p class="text-muted mb-0">Total Menus</p>
                </div>
            </div>
        </div>
        <div class="col-md-3">
            <div class="card border-success shadow-sm">
                <div class="card-body text-center">
                    <i class="bi bi-receipt text-success" style="font-size: 3rem;"></i>
                    <h3 class="mt-3">@ViewBag.TotalExpenses</h3>
                    <p class="text-muted mb-0">Total Expenses</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Admin Actions -->
    <div class="row mt-5">
        <div class="col-12">
            <h3 class="mb-3"><i class="bi bi-gear-fill"></i> Admin Actions</h3>
        </div>
    </div>

    <div class="row">
        <!-- Manage Users -->
        <div class="col-lg-4 mb-3">
            <div class="card h-100 border-0 shadow-sm">
                <div class="card-header bg-primary text-white">
                    <h5 class="mb-0"><i class="bi bi-people"></i> Manage Users</h5>
                </div>
                <div class="card-body">
                    <p class="card-text">View, create, edit, and delete users. Manage user roles and permissions.</p>
                    <a asp-action="Users" class="btn btn-primary">
                        <i class="bi bi-arrow-right-circle"></i> View Users
                    </a>
                </div>
            </div>
        </div>

        <!-- Manage Menus -->
        <div class="col-lg-4 mb-3">
            <div class="card h-100 border-0 shadow-sm">
                <div class="card-header bg-info text-white">
                    <h5 class="mb-0"><i class="bi bi-menu-button-wide"></i> Manage Menus</h5>
                </div>
                <div class="card-body">
                    <p class="card-text">Create, edit, and delete menu items. Assign menus to user roles.</p>
                    <a asp-action="Menus" class="btn btn-info">
                        <i class="bi bi-arrow-right-circle"></i> View Menus
                    </a>
                </div>
            </div>
        </div>

        <!-- Assign Menus to Roles -->
        <div class="col-lg-4 mb-3">
            <div class="card h-100 border-0 shadow-sm">
                <div class="card-header bg-success text-white">
                    <h5 class="mb-0"><i class="bi bi-diagram-3"></i> Assign Menus</h5>
                </div>
                <div class="card-body">
                    <p class="card-text">Configure which menus are visible to different user roles.</p>
                    <a asp-action="AssignMenus" class="btn btn-success">
                        <i class="bi bi-arrow-right-circle"></i> Assign Menus
                    </a>
                </div>
            </div>
        </div>
    </div>

    @if (isSuperAdmin)
    {
        <div class="row mt-4">
            <div class="col-12">
                <div class="alert alert-danger border-start border-5 border-danger" role="alert">
                    <h5><i class="bi bi-shield-exclamation"></i> Superadmin Actions</h5>
                    <p class="mb-3">These actions are only available to the superadmin account.</p>
                    <a asp-action="CreateAdmin" class="btn btn-danger me-2">
                        <i class="bi bi-person-plus-fill"></i> Create New Admin
                    </a>
                </div>
            </div>
        </div>
    }

    <!-- Quick Links -->
    <div class="row mt-4">
        <div class="col-12">
            <div class="card border-0 shadow-sm">
                <div class="card-header bg-secondary text-white">
                    <h5 class="mb-0"><i class="bi bi-link-45deg"></i> Quick Links</h5>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-md-3">
                            <a asp-controller="Dashboard" asp-action="Index" class="btn btn-outline-primary w-100">
                                <i class="bi bi-speedometer2"></i><br>Dashboard
                            </a>
                        </div>
                        <div class="col-md-3">
                            <a asp-controller="Expense" asp-action="Index" class="btn btn-outline-success w-100">
                                <i class="bi bi-receipt"></i><br>View Expenses
                            </a>
                        </div>
                        <div class="col-md-3">
                            <a asp-controller="Expense" asp-action="Create" class="btn btn-outline-info w-100">
                                <i class="bi bi-plus-circle"></i><br>Add Expense
                            </a>
                        </div>
                        <div class="col-md-3">
                            <form asp-controller="Account" asp-action="Logout" method="post" class="w-100">
                                @Html.AntiForgeryToken()
                                <button type="submit" class="btn btn-outline-danger w-100">
                                    <i class="bi bi-box-arrow-right"></i><br>Logout
                                </button>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

@section Styles {
    <style>
        h1 {
            color: #2c3e50;
            font-weight: 600;
            border-bottom: 3px solid #007bff;
            padding-bottom: 10px;
        }

        .card {
            transition: transform 0.2s;
        }

        .card:hover {
            transform: translateY(-5px);
        }

        .alert-danger {
            background-color: #ffebee;
        }
    </style>
}
